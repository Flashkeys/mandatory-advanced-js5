(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,a,t){e.exports={modalOverlay:"modal_modalOverlay__3JNFy",modalWrapper:"modal_modalWrapper__Xw-VF",Modal:"modal_Modal__3DGWe",modalHeader:"modal_modalHeader__3okk6","modal-title":"modal_modal-title__3XqX9",modalCloseButton:"modal_modalCloseButton__3ci3W",modalBody:"modal_modalBody__2q9fG",modalFooter:"modal_modalFooter__11vzo",cancelButton:"modal_cancelButton__8Blhb",createButton:"modal_createButton__2AvSH","modal-open":"modal_modal-open__19vqk","modal-button":"modal_modal-button__3f_9U","modal-button-cancel":"modal_modal-button-cancel__1BbEU","modal-button-destructive":"modal_modal-button-destructive__fuCE6","modal-button-default":"modal_modal-button-default__3IcLa","modal-animated":"modal_modal-animated__VSbrK","modal-animation-fade-in":"modal_modal-animation-fade-in___5O0T",fadeIn:"modal_fadeIn___FkaB",uploadFileButton:"modal_uploadFileButton__195iX"}},10:function(e,a,t){e.exports={container:"Sidebar_container__5EFX_",h3:"Sidebar_h3__rC0ON",link:"Sidebar_link__3O1-l",main:"Sidebar_main__2qpp2",Links:"Sidebar_Links__cWWBP",logo:"Sidebar_logo__5YGba",storageHeader:"Sidebar_storageHeader__r5Zsw",openButton:"Sidebar_openButton__3GOAC"}},13:function(e,a,t){e.exports={loginBody:"Login_loginBody__1Jfi4",loginHeader:"Login_loginHeader__3fu9X",loginA:"Login_loginA__3if87",loginButton:"Login_loginButton__tRAG4",dropboxLogo:"Login_dropboxLogo__1Oogp"}},16:function(e,a,t){e.exports=t.p+"static/media/logo.37da5cfd.png"},23:function(e,a,t){e.exports={homeContainer:"Home_homeContainer__1x2XO"}},27:function(e,a,t){e.exports=t.p+"static/media/dropbox-logo.19daac3e.png"},28:function(e,a,t){e.exports=t(43)},33:function(e,a,t){},4:function(e,a,t){e.exports={topBar:"Main_topBar__2tjh2",searchBar:"Main_searchBar__to8NH",profileBar:"Main_profileBar__3KgPr",mainContainer:"Main_mainContainer__1sIaZ",homeText:"Main_homeText__1koyU",inputHeader:"Main_inputHeader__2pImE",inputSearch:"Main_inputSearch__OcWB1",inputSearchInput:"Main_inputSearchInput__1y0be",iconSearch:"Main_iconSearch__1MzOr",logoutButton:"Main_logoutButton__3Kkl6",bcLink:"Main_bcLink__wjHWF"}},43:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(15),r=t.n(o),c=t(3),i=t(12),m=(t(33),t(23)),s=t.n(m),d=t(6),u=t(10),_=t.n(u),p=t(16),f=t.n(p),h=t(11),b=t.n(h),E=new(t(45).a)(window.localStorage.getItem("token")||null);function g(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),E.next(e),console.log(E.value)}var v=t(1),N=t.n(v),B=function(e){var a=window.location.pathname.substring(5),t=Object(n.useState)(""),o=Object(d.a)(t,2),r=o[0],c=o[1];console.log(r);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:N.a.modalHeader},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-folder"}),"     Create New Folder"),l.a.createElement("button",{type:"button",className:N.a.modalCloseButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:N.a.modalBody},l.a.createElement("label",null," Name this folder"),l.a.createElement("input",{type:"text",onChange:function(e){c(e.target.value)}})),l.a.createElement("div",{className:N.a.modalFooter},l.a.createElement("button",{type:"button",className:N.a.cancelButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},"Cancel"),l.a.createElement("button",{type:"button",className:N.a.createButton,onClick:function(){var e={fetch:fetch,accessToken:E.value};new h.Dropbox(e).filesCreateFolderV2({path:a+"/"+r}).then(function(e){console.log(e)})}},"Create")))},C=function(e){var a=window.location.pathname.substring(5),t=Object(n.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:N.a.modalHeader},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-file"}),"     Upload New File"),l.a.createElement("button",{type:"button",className:N.a.modalCloseButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:N.a.modalBody},l.a.createElement("input",{type:"file",ref:t,multiple:!0})),l.a.createElement("div",{className:N.a.modalFooter},l.a.createElement("button",{type:"button",className:N.a.cancelButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},"Cancel"),l.a.createElement("button",{type:"button",className:N.a.uploadFileButton,onClick:function(e){e.preventDefault();var n=t.current.files[0];console.log(n);var l={fetch:fetch,accessToken:E.value},o=new h.Dropbox(l);if(n.size<157286400)o.filesUpload({path:a+"/"+n.name,contents:n}).then(function(e){console.log(e)}).catch(function(e){console.error(e)});else for(var r=[],c=0;c<n.size;){var i=Math.min(8e6,n.size-c);r.push(n.slice(c,c+i)),c+=i}}},"Upload File")))},w=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:N.a.modalOverlay}),l.a.createElement("div",{className:N.a.modalWrapper,"aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},l.a.createElement("div",{className:N.a.Modal},"uploadFile"===e.type?l.a.createElement(C,e):null,"createFolder"===e.type?l.a.createElement(B,e):null)))},k=function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2),o=t[0],r=t[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),s=m[0],u=m[1],p=function(e){var a=e.target.id;console.log(a),r(!o),u(a),console.log("togle")};return l.a.createElement("div",{className:_.a.container},l.a.createElement("div",null,l.a.createElement(c.b,{to:"/home/"},l.a.createElement("img",{src:f.a,className:_.a.logo,alt:""})),l.a.createElement("div",{className:_.a.main},l.a.createElement("h3",{className:_.a.h3},"Meny"),l.a.createElement("div",{className:_.a.Links},l.a.createElement(c.b,{to:"/home/",className:_.a.link},"Filer (root)"),l.a.createElement("button",{className:_.a.openButton,id:"createFolder",onClick:p},"Create Folder"),l.a.createElement("button",{className:_.a.openButton,id:"uploadFile",onClick:p},"Upload File")))),l.a.createElement("div",{className:_.a.storageHeader},l.a.createElement("p",null," / 2 GB"),l.a.createElement("progress",{id:"file",max:"100",value:"70"}," 70% ")),o?l.a.createElement(w,{togle:p,type:s}):null)};function y(e){var a=[],t=e.split("/").filter(function(e){return""!==e}),n="",l=!0,o=!1,r=void 0;try{for(var c,i=t[Symbol.iterator]();!(l=(c=i.next()).done);l=!0){var m=c.value,s="";0===a.length?n+=s="/"+m:(s=n+"/"+m,n+="/"+m);var d={name:m,path:s};a.push(d)}}catch(u){o=!0,r=u}finally{try{l||null==i.return||i.return()}finally{if(o)throw r}}return a}var x=t(4),O=t.n(x),S=t(5),F=t.n(S),M=t(26),L=t.n(M),I=function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2);t[0],t[1];var o=l.a.useRef();var r,i=e[".tag"];return l.a.createElement("div",{className:F.a.newCard},l.a.createElement("img",{className:F.a.thumbnail,ref:o,src:function(a,t){if("folder"===a)return"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLfDzP9UsOfVcePDGDEmNKNT9Cz7rhBw0QM-GmzTH7bDxfhMZ7TA";switch(function(e){return e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase()||e}(t)){case"jpg":case"jpeg":case"png":case"svg":case"tiff":case"tif":return n=e.path_display,void e.dbx.filesGetThumbnail({path:n}).then(function(e){var a=URL.createObjectURL(e.fileBlob);o.current.src=a}).catch(function(e){console.log(e)});case"pdf":return"https://image.flaticon.com/icons/svg/337/337946.svg";default:return"https://www.shareicon.net/data/512x512/2016/04/28/756959_document_512x512.png"}var n}(i,e.name),alt:""}),l.a.createElement("div",{className:F.a.meta},"folder"===i?l.a.createElement(c.b,{className:F.a.link,to:"/home"+e.path_lower},l.a.createElement("p",{className:F.a.fileName}," ",e.name," ")):null,"file"===i?l.a.createElement("button",{className:F.a.fileLink,onClick:function(){return e.id,void e.dbx.filesGetTemporaryLink({path:e.path_lower}).then(function(e){window.location.href=e.link}).catch(function(e){console.log(e)})},to:null},l.a.createElement("p",{className:F.a.fileName}," ",e.name," ")):null,l.a.createElement("div",{className:F.a.metadata},l.a.createElement("p",{className:F.a.timestamp}," ",void 0===(r=e.server_modified)?"":L()(r,"YYYY-MM-DDThh:mm:ssZ").fromNow()),l.a.createElement("p",{className:F.a.size}," ",function(e){if(void 0===e)return null;if(0===e)return"0 Byte";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+["Bytes","KB","MB","GB","TB"][a]}(e.size)," "))),l.a.createElement("button",{className:F.a.starIcon},l.a.createElement("i",{className:"icon ion-ios-star-outline"})))};var j=function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),o=t[0],r=t[1],m=new b.a.Dropbox({accessToken:E.value}),s=window.location.pathname;return Object(n.useEffect)(function(){!function(a){if(a!==e.url){var t=a.substring(5);m.filesListFolder({path:decodeURI(t)}).then(function(e){r(e.entries)})}else m.filesListFolder({path:""}).then(function(e){r(e.entries)})}(s)},[s]),null===E.value?l.a.createElement(i.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement("div",{className:O.a.topBar},l.a.createElement("div",{className:O.a.profileBar}),l.a.createElement("button",{className:O.a.logoutButton,onClick:function(){g(null),r([])}},l.a.createElement("i",{className:"fas fa-sign-out-alt"})," SIGN OUT "),l.a.createElement("div",{className:O.a.searchBar},l.a.createElement("h3",{className:O.a.homeText},y(s).map(function(e){return l.a.createElement(c.b,{className:O.a.bcLink,key:e.path,to:e.path},"/",decodeURI(e.name))})),l.a.createElement("div",{className:O.a.inputHeader},l.a.createElement("div",{className:O.a.inputSearch},l.a.createElement("input",{type:"text",placeholder:"Search...",className:O.a.inputSearchInput}),l.a.createElement("div",{className:O.a.iconSearch},l.a.createElement("i",{className:"icon ion-md-search"})))))),l.a.createElement("div",{className:O.a.mainContainer},o.map(function(e){return l.a.createElement(I,Object.assign({key:e.id,dbx:m},e))})))},H=function(e){var a=e.match;return null===E.value?l.a.createElement(i.a,{to:"/"}):l.a.createElement("div",{className:s.a.homeContainer},l.a.createElement(k,null),l.a.createElement(j,a))},U=t(13),T=t.n(U),z=t(27),D=t.n(z),G=function(){var e=new h.Dropbox({clientId:"2k9z1293u11it1b",fetch:fetch});return l.a.createElement(l.a.Fragment,null,E.value?l.a.createElement(i.a,{to:"/home"}):l.a.createElement("div",{className:T.a.loginBody},l.a.createElement("header",{className:T.a.loginHeader},l.a.createElement("img",{src:f.a,className:T.a.logo,alt:""}),l.a.createElement("i",{className:"fas fa-bars"})),l.a.createElement("a",{className:T.a.loginA,href:e.getAuthenticationUrl("http://localhost:3000/auth")},l.a.createElement("img",{src:D.a,className:T.a.dropboxLogo,alt:""}),l.a.createElement("button",{className:T.a.loginButton},"Connect w/ Dropbox"))))},A=function(){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],o=a[1];if(Object(n.useEffect)(function(){o(!0)},[]),t){var r=function(e){var a=Object.create(null);return"string"!==typeof e?a:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),l=t.length>0?t.join("="):void 0;n=decodeURIComponent(n),l=void 0===l?null:decodeURIComponent(l),void 0===a[n]?a[n]=l:Array.isArray(a[n])?a[n].push(l):a[n]=[a[n],l]}),a):a}(window.location.hash).access_token;return console.log(r),g(r),l.a.createElement(i.a,{to:"/home"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"auth"},l.a.createElement("h1",null,"Loading...")))};r.a.render(l.a.createElement(function(){return l.a.createElement(c.a,null,l.a.createElement(i.b,{path:"/home/",component:H}),l.a.createElement(i.b,{exact:!0,path:"/",render:function(){return l.a.createElement(G,null)}}),l.a.createElement(i.b,{path:"/auth",render:function(){return l.a.createElement(A,null)}}))},null),document.getElementById("root"))},5:function(e,a,t){e.exports={newCard:"Card_newCard__zpxlN",thumbnail:"Card_thumbnail__24KHB",fileName:"Card_fileName__imMHX",timestamp:"Card_timestamp__2Sbez",link:"Card_link__5fVuV",fileLink:"Card_fileLink__3URJX",meta:"Card_meta__2bNOd",metadata:"Card_metadata__3mMut",starIcon:"Card_starIcon__2hXPO"}}},[[28,1,2]]]);
//# sourceMappingURL=main.359f2c27.chunk.js.map