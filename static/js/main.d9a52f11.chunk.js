(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,a,t){e.exports={modalOverlay:"modal_modalOverlay__3JNFy",modalWrapper:"modal_modalWrapper__Xw-VF",Modal:"modal_Modal__3DGWe",modalHeader:"modal_modalHeader__3okk6","modal-title":"modal_modal-title__3XqX9",modalCloseButton:"modal_modalCloseButton__3ci3W",modalBody:"modal_modalBody__2q9fG",modalFooter:"modal_modalFooter__11vzo",cancelButton:"modal_cancelButton__8Blhb",createButton:"modal_createButton__2AvSH","modal-open":"modal_modal-open__19vqk","modal-button":"modal_modal-button__3f_9U","modal-button-cancel":"modal_modal-button-cancel__1BbEU","modal-button-destructive":"modal_modal-button-destructive__fuCE6","modal-button-default":"modal_modal-button-default__3IcLa","modal-animated":"modal_modal-animated__VSbrK","modal-animation-fade-in":"modal_modal-animation-fade-in___5O0T",fadeIn:"modal_fadeIn___FkaB",uploadFileButton:"modal_uploadFileButton__195iX"}},13:function(e,a,t){e.exports={loginBody:"Login_loginBody__1Jfi4",loginHeader:"Login_loginHeader__3fu9X",loginA:"Login_loginA__3if87",loginButton:"Login_loginButton__tRAG4",dropboxLogo:"Login_dropboxLogo__1Oogp"}},16:function(e,a,t){e.exports=t.p+"static/media/logo.37da5cfd.png"},23:function(e,a,t){e.exports={homeContainer:"Home_homeContainer__1x2XO"}},27:function(e,a,t){e.exports=t.p+"static/media/dropbox-logo.19daac3e.png"},28:function(e,a,t){e.exports=t(43)},33:function(e,a,t){},4:function(e,a,t){e.exports={topBar:"Main_topBar__2tjh2",searchBar:"Main_searchBar__to8NH",profileBar:"Main_profileBar__3KgPr",mainContainer:"Main_mainContainer__1sIaZ",homeText:"Main_homeText__1koyU",inputHeader:"Main_inputHeader__2pImE",inputSearch:"Main_inputSearch__OcWB1",inputSearchInput:"Main_inputSearchInput__1y0be",iconSearch:"Main_iconSearch__1MzOr",logoutButton:"Main_logoutButton__3Kkl6",bcLink:"Main_bcLink__wjHWF",backButton:"Main_backButton__t3pUC"}},43:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),l=t(15),r=t.n(l),c=t(3),i=t(12),m=(t(33),t(23)),s=t.n(m),d=t(7),u=t(5),_=t.n(u),p=t(16),f=t.n(p),h=t(11),g=t.n(h),b=new(t(45).a)(window.localStorage.getItem("token")||null);function E(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),b.next(e),console.log(b.value)}var v=t(1),N=t.n(v),B=function(e){var a=window.location.pathname.substring(5),t=Object(n.useState)(""),l=Object(d.a)(t,2),r=l[0],c=l[1];console.log(r);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:N.a.modalHeader},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-folder"}),"     Create New Folder"),o.a.createElement("button",{type:"button",className:N.a.modalCloseButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:N.a.modalBody},o.a.createElement("label",null," Name this folder"),o.a.createElement("input",{type:"text",onChange:function(e){c(e.target.value)}})),o.a.createElement("div",{className:N.a.modalFooter},o.a.createElement("button",{type:"button",className:N.a.cancelButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},"Cancel"),o.a.createElement("button",{type:"button",className:N.a.createButton,onClick:function(){var e={fetch:fetch,accessToken:b.value};new h.Dropbox(e).filesCreateFolderV2({path:a+"/"+r}).then(function(e){console.log(e)})}},"Create")))},C=function(e){var a=window.location.pathname.substring(5),t=Object(n.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:N.a.modalHeader},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-file"}),"     Upload New File"),o.a.createElement("button",{type:"button",className:N.a.modalCloseButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:N.a.modalBody},o.a.createElement("input",{type:"file",ref:t,multiple:!0})),o.a.createElement("div",{className:N.a.modalFooter},o.a.createElement("button",{type:"button",className:N.a.cancelButton,"data-dismiss":"modal","aria-label":"Close",onClick:e.togle},"Cancel"),o.a.createElement("button",{type:"button",className:N.a.uploadFileButton,onClick:function(e){e.preventDefault();var n=t.current.files[0];console.log(n);var o={fetch:fetch,accessToken:b.value},l=new h.Dropbox(o);if(n.size<157286400)l.filesUpload({path:a+"/"+n.name,contents:n}).then(function(e){console.log(e)}).catch(function(e){console.error(e)});else for(var r=[],c=0;c<n.size;){var i=Math.min(8e6,n.size-c);r.push(n.slice(c,c+i)),c+=i}}},"Upload File")))},k=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:N.a.modalOverlay}),o.a.createElement("div",{className:N.a.modalWrapper,"aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},o.a.createElement("div",{className:N.a.Modal},"uploadFile"===e.type?o.a.createElement(C,e):null,"createFolder"===e.type?o.a.createElement(B,e):null)))},w=function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2),l=t[0],r=t[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),s=m[0],u=m[1],p=function(e){var a=e.target.id;console.log(a),r(!l),u(a),console.log("togle")};return o.a.createElement("div",{className:_.a.container},o.a.createElement(c.b,{to:"/home/",className:_.a.logoContainer},o.a.createElement("img",{src:f.a,className:_.a.logo,alt:""})),o.a.createElement("div",null,o.a.createElement("div",{className:_.a.main},o.a.createElement("h3",{className:_.a.h3},"Meny"),o.a.createElement("div",{className:_.a.Links},o.a.createElement(c.b,{to:"/home/",className:_.a.link},"Filer (root)"),o.a.createElement("button",{className:_.a.openButton,id:"createFolder",onClick:p},"Create Folder"),o.a.createElement("button",{className:_.a.openButton,id:"uploadFile",onClick:p},"Upload File")),o.a.createElement(c.b,{to:"/favorites"},"Favorites"))),o.a.createElement("div",{className:_.a.storageBox},o.a.createElement("p",null,"1.2 / 2 GB used"),o.a.createElement("progress",{className:_.a.storageProgress,id:"file",max:"100",value:"70"}," 70% ")),l?o.a.createElement(k,{togle:p,type:s}):null)};function y(e){var a=[],t=e.split("/").filter(function(e){return""!==e}),n="",o=!0,l=!1,r=void 0;try{for(var c,i=t[Symbol.iterator]();!(o=(c=i.next()).done);o=!0){var m=c.value,s="";0===a.length?n+=s="/"+m:(s=n+"/"+m,n+="/"+m);var d={name:m,path:s};a.push(d)}}catch(u){l=!0,r=u}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}var x=t(4),S=t.n(x),O=t(6),F=t.n(O),M=t(26),L=t.n(M),I=function(e){var a=Object(n.useState)(e.id===localStorage.getItem(e.id)),t=Object(d.a)(a,2),l=t[0],r=t[1];var i=o.a.useRef();var m,s=e[".tag"];return o.a.createElement("div",{className:F.a.newCard},o.a.createElement("img",{className:F.a.thumbnail,ref:i,src:function(a,t){if("folder"===a)return"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLfDzP9UsOfVcePDGDEmNKNT9Cz7rhBw0QM-GmzTH7bDxfhMZ7TA";switch(function(e){return e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase()||e}(t)){case"jpg":case"jpeg":case"png":case"svg":case"tiff":case"tif":return n=e.path_display,void e.dbx.filesGetThumbnail({path:n}).then(function(e){var a=URL.createObjectURL(e.fileBlob);i.current.src=a}).catch(function(e){console.log(e)});case"pdf":return"https://image.flaticon.com/icons/svg/337/337946.svg";default:return"https://www.shareicon.net/data/512x512/2016/04/28/756959_document_512x512.png"}var n}(s,e.name),alt:""}),o.a.createElement("div",{className:F.a.meta},"folder"===s?o.a.createElement(c.b,{className:F.a.link,to:"/home"+e.path_lower},o.a.createElement("p",{className:F.a.fileName}," ",e.name," ")):null,"file"===s?o.a.createElement("button",{className:F.a.fileLink,onClick:function(){return e.id,void e.dbx.filesGetTemporaryLink({path:e.path_lower}).then(function(e){window.location.href=e.link}).catch(function(e){console.log(e)})},to:null},o.a.createElement("p",{className:F.a.fileName}," ",e.name," ")):null,o.a.createElement("div",{className:F.a.metadata},o.a.createElement("p",{className:F.a.timestamp}," ",void 0===(m=e.server_modified)?"":L()(m,"YYYY-MM-DDThh:mm:ssZ").fromNow()),o.a.createElement("p",{className:F.a.size}," ",function(e){if(void 0===e)return null;if(0===e)return"0 Byte";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+["Bytes","KB","MB","GB","TB"][a]}(e.size)," "))),o.a.createElement("button",{className:F.a.starIcon,onClick:function(){l?(r(!1),localStorage.removeItem(e.id)):(r(!0),localStorage.setItem(e.id,e.id))}},o.a.createElement("i",{className:"icon ".concat(l?"ion-ios-star":"ion-ios-star-outline"," ")})))};var j=function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),l=t[0],r=t[1],m=new g.a.Dropbox({accessToken:b.value}),s=window.location.pathname;return Object(n.useEffect)(function(){!function(a){if(a!==e.url){var t=a.substring(5);m.filesListFolder({path:decodeURI(t)}).then(function(e){r(e.entries)})}else m.filesListFolder({path:""}).then(function(e){r(e.entries)})}(s)},[s]),null===b.value?o.a.createElement(i.a,{to:"/"}):o.a.createElement("div",null,o.a.createElement("div",{className:S.a.topBar},o.a.createElement("div",{className:S.a.profileBar}),o.a.createElement("button",{className:S.a.logoutButton,onClick:function(){E(null),r([])}},o.a.createElement("i",{class:"icon ion-md-log-out"})," Logout"),o.a.createElement("div",{className:S.a.searchBar},o.a.createElement("p",{className:S.a.homeText},function(e){var a=y(e),t=a.length,n=[];return 1===a.length?(n.push({name:"undefined",path:"/home"}),n):(n.push(a[t-2]),console.log(n),n)}(s).map(function(e){return o.a.createElement(c.b,{key:e.path,className:S.a.backButton,to:e.path},o.a.createElement("i",{className:"fas fa-arrow-alt-circle-up"}))}),y(s).map(function(e){return o.a.createElement(c.b,{className:S.a.bcLink,key:e.path,to:e.path},decodeURI(e.name)," ",o.a.createElement("i",{class:"fas fa-chevron-right"}))})),o.a.createElement("div",{className:S.a.inputHeader},o.a.createElement("div",{className:S.a.inputSearch},o.a.createElement("div",{className:S.a.iconSearch},o.a.createElement("i",{className:"icon ion-md-search"})),o.a.createElement("input",{type:"text",placeholder:"Search...",className:S.a.inputSearchInput}))))),o.a.createElement("div",{className:S.a.mainContainer},l.map(function(e){return o.a.createElement(I,Object.assign({key:e.id,id:e.id,dbx:m},e))})))},H=function(e){var a=e.match;return null===b.value?o.a.createElement(i.a,{to:"/"}):o.a.createElement("div",{className:s.a.homeContainer},o.a.createElement(w,null),o.a.createElement(j,a))},U=t(13),D=t.n(U),T=t(27),z=t.n(T),G=function(){var e=new h.Dropbox({clientId:"2k9z1293u11it1b",fetch:fetch});return o.a.createElement(o.a.Fragment,null,b.value?o.a.createElement(i.a,{to:"/home"}):o.a.createElement("div",{className:D.a.loginBody},o.a.createElement("header",{className:D.a.loginHeader},o.a.createElement("img",{src:f.a,className:D.a.logo,alt:""}),o.a.createElement("i",{className:"fas fa-bars"})),o.a.createElement("a",{className:D.a.loginA,href:e.getAuthenticationUrl("http://localhost:3000/auth")},o.a.createElement("img",{src:z.a,className:D.a.dropboxLogo,alt:""}),o.a.createElement("button",{className:D.a.loginButton},"Connect w/ Dropbox"))))},A=function(){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],l=a[1];if(Object(n.useEffect)(function(){l(!0)},[]),t){var r=function(e){var a=Object.create(null);return"string"!==typeof e?a:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),o=t.length>0?t.join("="):void 0;n=decodeURIComponent(n),o=void 0===o?null:decodeURIComponent(o),void 0===a[n]?a[n]=o:Array.isArray(a[n])?a[n].push(o):a[n]=[a[n],o]}),a):a}(window.location.hash).access_token;return console.log(r),E(r),o.a.createElement(i.a,{to:"/home"})}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"auth"},o.a.createElement("h1",null,"Loading...")))},R=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"example temp page"))};r.a.render(o.a.createElement(function(){return o.a.createElement(c.a,null,o.a.createElement(i.b,{path:"/home/",component:H}),o.a.createElement(i.b,{path:"/favorites",component:R}),o.a.createElement(i.b,{exact:!0,path:"/",render:function(){return o.a.createElement(G,null)}}),o.a.createElement(i.b,{path:"/auth",render:function(){return o.a.createElement(A,null)}}))},null),document.getElementById("root"))},5:function(e,a,t){e.exports={container:"Sidebar_container__5EFX_",h3:"Sidebar_h3__rC0ON",link:"Sidebar_link__3O1-l",main:"Sidebar_main__2qpp2",Links:"Sidebar_Links__cWWBP",logo:"Sidebar_logo__5YGba",logoContainer:"Sidebar_logoContainer__3bB9K",storageBox:"Sidebar_storageBox__ab69a",storageProgress:"Sidebar_storageProgress__CQDdY",openButton:"Sidebar_openButton__3GOAC"}},6:function(e,a,t){e.exports={newCard:"Card_newCard__zpxlN",thumbnail:"Card_thumbnail__24KHB",fileName:"Card_fileName__imMHX",timestamp:"Card_timestamp__2Sbez",link:"Card_link__5fVuV",fileLink:"Card_fileLink__3URJX",meta:"Card_meta__2bNOd",metadata:"Card_metadata__3mMut",starIcon:"Card_starIcon__2hXPO"}}},[[28,1,2]]]);
//# sourceMappingURL=main.d9a52f11.chunk.js.map